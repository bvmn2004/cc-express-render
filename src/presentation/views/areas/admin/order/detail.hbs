<div class="mb-6">
    <a href="/admin/orders" class="text-blue-600 hover:underline mb-4 inline-block">‚Üê Back to Orders</a>
    <h1 class="text-2xl font-bold">Order #{{order.id}}</h1>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Order Information -->
    <div class="bg-white border border-gray-300 rounded p-6 shadow">
        <h2 class="text-xl font-semibold mb-4">Order Information</h2>
        <div class="space-y-2">
            <div class="flex justify-between">
                <span class="text-gray-600">Order ID:</span>
                <span class="font-semibold">#{{order.id}}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-600">Status:</span>
                <span class="px-2 py-1 rounded text-sm
                    {{#if (eq order.status 'pending')}}bg-yellow-100 text-yellow-800{{/if}}
                    {{#if (eq order.status 'processing')}}bg-blue-100 text-blue-800{{/if}}
                    {{#if (eq order.status 'shipped')}}bg-purple-100 text-purple-800{{/if}}
                    {{#if (eq order.status 'delivered')}}bg-green-100 text-green-800{{/if}}
                    {{#if (eq order.status 'cancelled')}}bg-red-100 text-red-800{{/if}}">
                    {{order.status}}
                </span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-600">Total Amount:</span>
                <span class="font-semibold">${{formatCurrency order.total_amount}}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-600">Date:</span>
                <span>{{order.created_at}}</span>
            </div>
        </div>

        <!-- Update Status Form -->
        <div class="mt-6 pt-6 border-t">
            <h3 class="font-semibold mb-3">Update Status</h3>
            <form action="/admin/orders/{{order.id}}/update-status" method="POST" class="flex gap-2">
                <select name="status" class="border border-gray-300 rounded px-3 py-2 flex-1" required>
                    <option value="pending" {{#if (eq order.status 'pending')}}selected{{/if}}>Pending</option>
                    <option value="processing" {{#if (eq order.status 'processing')}}selected{{/if}}>Processing</option>
                    <option value="shipped" {{#if (eq order.status 'shipped')}}selected{{/if}}>Shipped</option>
                    <option value="delivered" {{#if (eq order.status 'delivered')}}selected{{/if}}>Delivered</option>
                    <option value="cancelled" {{#if (eq order.status 'cancelled')}}selected{{/if}}>Cancelled</option>
                </select>
                <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                    Update
                </button>
            </form>
        </div>
    </div>

    <!-- Shipping Address -->
    <div class="bg-white border border-gray-300 rounded p-6 shadow">
        <h2 class="text-xl font-semibold mb-4">Shipping Address</h2>
        <div class="whitespace-pre-line text-gray-700">{{order.shipping_address}}</div>
    </div>
</div>

<!-- Order Items -->
<div class="mt-6 bg-white border border-gray-300 rounded p-6 shadow">
    <h2 class="text-xl font-semibold mb-4">Order Items</h2>
    {{#if order.items.length}}
    <table class="w-full border border-gray-300">
        <thead class="bg-gray-100">
            <tr>
                <th class="px-4 py-2 border">Product</th>
                <th class="px-4 py-2 border">Quantity</th>
                <th class="px-4 py-2 border">Unit Price</th>
                <th class="px-4 py-2 border">Total</th>
            </tr>
        </thead>
        <tbody>
            {{#each order.items}}
            <tr class="hover:bg-gray-50">
                <td class="px-4 py-2 border">
                    <div class="flex items-center gap-3">
                        {{#if this.product_image}}
                        <img src="{{this.product_image}}" alt="{{this.product_name}}" class="w-12 h-12 object-cover rounded">
                        {{/if}}
                        <span>{{this.product_name}}</span>
                    </div>
                </td>
                <td class="px-4 py-2 border text-center">{{this.quantity}}</td>
                <td class="px-4 py-2 border">${{formatCurrency this.unit_price}}</td>
                <td class="px-4 py-2 border font-semibold">${{multiply this.unit_price this.quantity}}</td>
            </tr>
            {{/each}}
        </tbody>
        <tfoot>
            <tr>
                <td colspan="3" class="px-4 py-2 border text-right font-semibold">Total:</td>
                <td class="px-4 py-2 border font-semibold">${{formatCurrency order.total_amount}}</td>
            </tr>
        </tfoot>
    </table>
    {{else}}
    <p class="text-gray-500">No items found</p>
    {{/if}}
</div>

